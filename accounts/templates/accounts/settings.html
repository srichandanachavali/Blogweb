{% extends 'blog/base.html' %}

{% block title %}Settings â€¢ Blogweb{% endblock %}

{% block content %}
<section class="form-card">
  <h1>Profile settings</h1>
  <form method="post" enctype="multipart/form-data" class="stack">
    {% csrf_token %}
    <input type="hidden" name="update_profile" value="1" />
    <div class="form-group">
      {{ u_form.username.label_tag }}
      {{ u_form.username }}
      {% if u_form.username.errors %}<p class="error">{{ u_form.username.errors|striptags }}</p>{% endif %}
    </div>
    <div class="form-group">
      {{ u_form.email.label_tag }}
      {{ u_form.email }}
      {% if u_form.email.errors %}<p class="error">{{ u_form.email.errors|striptags }}</p>{% endif %}
    </div>
    <div class="form-group file-input">
      {{ profile_form.image.label_tag }}
      {{ profile_form.image }}
    </div>
    <button type="submit" class="button">Save changes</button>
  </form>
</section>

<section class="theme-card">
  <h2>Appearance</h2>
  <form method="post" action="{% url 'set_theme' %}" class="theme-settings">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ request.get_full_path }}" />
    <div class="theme-options">
      <label class="theme-option {% if active_theme == 'light' %}is-active{% endif %}">
        <input type="radio" name="theme" value="light" {% if active_theme == 'light' %}checked{% endif %} />
        <strong>Light</strong>
        <span>Bright and minimal look</span>
      </label>
      <label class="theme-option {% if active_theme == 'dark' %}is-active{% endif %}">
        <input type="radio" name="theme" value="dark" {% if active_theme == 'dark' %}checked{% endif %} />
        <strong>Dark</strong>
        <span>Low-light friendly palette</span>
      </label>
      <label class="theme-option {% if active_theme == 'custom' %}is-active{% endif %}">
        <input type="radio" name="theme" value="custom" {% if active_theme == 'custom' %}checked{% endif %} />
        <strong>Custom</strong>
        <span>Use your accent color</span>
      </label>
    </div>
    <div class="accent-picker">
      <label for="accent-color">Accent color</label>
      <input type="color" id="accent-color" name="accent_color" value="{{ accent_color|default:'#ff4f70' }}" />
    </div>
    <button type="submit" class="button ghost">Save appearance</button>
  </form>
</section>

<section class="form-card">
  <h2>Change password</h2>
  <form method="post" class="stack">
    {% csrf_token %}
    <input type="hidden" name="change_password" value="1" />
    {% for field in p_form %}
    <div class="form-group">
      {{ field.label_tag }}
      {{ field }}
      {% if field.errors %}<p class="error">{{ field.errors|striptags }}</p>{% endif %}
    </div>
    {% endfor %}
    <button type="submit" class="button ghost">Update password</button>
  </form>
</section>
{% endblock %}